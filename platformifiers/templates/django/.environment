{{ if .Database }}
# Set database environment variables
export DATABASE_HOST=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].host")
export DATABASE_PORT=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].port")
export DATABASE_NAME=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].path")
export DATABASE_USER=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].username")
export DATABASE_USER=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].username")
export DATABASE_SCHEME=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].scheme")
export DATABASE_URL="${DATABASE_SCHEME}://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}"
{{ end }}

{{ if .Cache }}
# Set Cache environment variables
export CACHE_HOST=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].host")
export CACHE_PORT=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].port")
export CACHE_PASSWORD=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].password")
export CACHE_SCHEME=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].scheme")
export CACHE_URL="${CACHE_SCHEME}://${CACHE_PASSWORD}@${CACHE_HOST}:${CACHE_PORT}"
{{ end }}

{{ if eq .Cache "redis" }}
# Set Redis environment variables
export REDIS_URL=$CACHE_URL
{{ end }}
