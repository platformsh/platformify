{{ if .Database }}
# Set database environment variables
export DB_HOST=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].host")
export DB_PORT=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].port")
export DB_DATABASE=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].path")
export DB_USERNAME=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].username")
export DB_PASSWORD=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].password")
export DB_CONNECTION=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Database }}[0].scheme")
export DATABASE_URL="${DB_CONNECTION}://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_DATABASE}"
{{ end }}

{{ if .Cache }}
# Set Cache environment variables
export CACHE_HOST=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].host")
export CACHE_PORT=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].port")
export CACHE_PASSWORD=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].password")
export CACHE_SCHEME=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode | jq -r ".{{ .Cache }}[0].scheme")
export CACHE_URL="${CACHE_SCHEME}://${CACHE_PASSWORD}@${CACHE_HOST}:${CACHE_PORT}"
{{ end }}

{{ if eq .Cache "redis" }}
# Set Redis environment variables
export REDIS_URL=$CACHE_URL
{{ end }}
